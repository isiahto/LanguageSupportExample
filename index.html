<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Cloning Div</title>
    <!-- <meta name="description" content="The HTML5 Herald"> -->
    <!-- <meta name="author" content="SitePoint"> -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script
        src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet"> 


    <style type="text/css">
      * {
        font-family: 'Roboto', sans-serif;
      }


      div.r {
        border-style: solid;
        border-color: red;
        border-width: 2px;
      }

      div.b {
        border-style: solid;
        border-color: green;
        border-width: 2px;
      }

      label.l-sm {
        font-size: 14px;
        margin-bottom: 4px;
      }

    </style>
  </head>

  <body>
    <div class="container">
      <div class="row border border-danger">
        <div class="col-6 border border-primary">
          half
        </div>
        <div class="col-6 border border-success">
          another half
        </div>
      </div>

      <div style="height: 150px;">
      </div>

      <!-- input div -->
      <div class="r" style="margin: 2.5px -15px; padding: 2px 15px 2px 15px;">

        <div class="row my-1">
          <div class="col-8">
            <div class="input-group input-group-sm form-inline">
              <label class="l-sm">Product:</label>
              <select id="ddl_products" class="form-control form-control-sm ml-2">
                <option>Peeled Oranges</option>
              </select>
            </div>
          </div>
          <div class="col-4">

            <div class="input-group input-group-sm form-inline">
              <label>N:</label>
              <input type="text" class="form-control ml-2">
              <div class="input-group-append">
                <span class="input-group-text" id="basic-addon2">units</span>
              </div>
            </div>

          </div>
        </div>

        <div class="row my-1">
          <div class="col-6">
            <div class="form-row">
              <div class="col-4">
                <div class="input-group input-group-sm form-inline">
                  <label class="l-sm">Discount:</label>
                  <input type="text" class="form-control ml-2">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
              <div class="col-8">
                <div class="input-group input-group-sm form-inline">
                  <label class="l-sm">Amount:</label>
                  <div class="input-group-prepend ml-2">
                    <span class="input-group-text">$</span>
                  </div>
                  <input type="text" class="form-control">
                </div>
              </div>
            </div>
          </div>

          <div class="col-6">
            <div class="form-row">
              <div class="col-4">
                <div class="input-group input-group-sm form-inline">
                  <label class="l-sm">Discount:</label>
                  <input type="text" class="form-control ml-2">
                  <div class="input-group-append">
                    <span class="input-group-text">%</span>
                  </div>
                </div>
              </div>
              <div class="col-8">
                <div class="input-group input-group-sm form-inline">
                  <label class="l-sm">Amount:</label>
                  <div class="input-group-prepend ml-2">
                    <span class="input-group-text">$</span>
                  </div>
                  <input type="text" class="form-control">
                </div>
              </div>
            </div>
          </div>  
        </div>

        <div class="row my-1">
          <div class="col-9">
            <div class="input-group input-group-sm form-inline">
              <label class="l-sm">Recipient:</label>
              <input class="form-control form-control-sm mx-1">
            </div>

          </div>
          <div class="col-3">
            <div class="input-group input-group-sm form-inline">
              <label class="l-sm">Amount:</label>
              <div class="input-group-prepend ml-2">
                <span class="input-group-text">$</span>
              </div>
              <input type="text" class="form-control">
            </div>
          </div>
        </div>

        <!-- buttons -->
        <div class="row">
          <div class="col-2 offset-10">
            <button class="btn btn-sm btn-primary" style="float: right;" id="btn_add">Add a product</button>
          </div>
        </div>

      </div>
      <!-- input div -->

      <!-- display div -->
      <div id="div_cloner" class="r" style="margin: 0px -15px; padding: 0px 15px;">
        <div class="row">
          <div class="col-8">
            <label class="l-sm">Product:</label>
            <!-- <select id="ddl_products"></select> -->
            <strong><label id="lbl_product">Peeled Oranges</label></strong>
          </div>
          <div class="col-2">
            <label class="l-sm">N:</label>
            <strong><label id="lbl_n">20</label></strong>
          </div>
        </div>
        <div class="row">

          <div class="col-6">
            <div class="form-row">
              <div class="col-4">
                <label class="l-sm">Discount:</label>
                <strong><label id="lbl_d1">2%</label></strong>
              </div>
              
              <div class="col-8">
                <label class="l-sm">Above amount:</label>
                <strong><label id="lbl_d1amount">$ 100</label></strong>
              </div>
            </div>
          </div>

          <div class="col-6">
            <div class="form-row">
              <div class="col-4">
                <label class="l-sm">Discount2:</label>
                <strong><label id="lbl_d2">20%</label></strong>
              </div>
              
              <div class="col-8">
                <label class="l-sm">Above amount:</label>
                <strong><label id="lbl_d2amount">$ 1000</label></strong>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-9">
            <label class="l-sm">Recipient:</label>
            <strong><label id="lbl_to">My lovely grandma</label></strong>
          </div>
          <div class="col-3">
            <label class="l-sm">Total Amount:</label>
            <strong><label id="lbl_toamount">$ 500</label></strong>
          </div>
        </div>

      </div>
      <!-- display div -->

    </div>

    <!-- Repeating logic (from button onclick) -->
    <script>
      var btn = document.getElementById('btn_add');
      btn.onclick = function() {
        return onAddClicked() && false;
      }

      function onAddClicked() {
        console.debug('onAddClicked');

        // fetch all the data from the inputs, load them into the labels
        loadDataToLabels();
        // **clear the input fields 
        clearInputs();
        // clone the div
        // remove the ids
        // change to visible
        // div.appendChild(clonedNode)
        // **clear the label-div
        
      }
      function clearInputs() {
        console.debug('clearInputs');
      }


      function loadDataToLabels() {
        console.debug('loadDataToLabels');
        document.getElementById('lbl_product').innerText  = getSelectedProduct();
        document.getElementById('lbl_n').innerText        = getMoneyString(21);
        document.getElementById('lbl_d1').innerText       = getPercentageString(21);
        document.getElementById('lbl_d1amount').innerText = getMoneyString(101);
        document.getElementById('lbl_d2').innerText       = getPercentageString(21);
        document.getElementById('lbl_d2amount').innerText = getMoneyString(1001);
        document.getElementById('lbl_to').innerText       = "Someone special...";
        document.getElementById('lbl_toamount').innerText = getMoneyString(5001);
      }

      function getPercentageString(v) {
        return v + "%";
      }
      function getMoneyString(a) {
        return "$ " + a;
      }
      function getSelectedProduct() {
        var ddl = document.getElementById('ddl_products');        
        return ddl[ddl.selectedIndex].innerText;
      }


    </script>


    <script>
      const products = ['peeled oranges', 'very loooooooong banana', 'seedless mangos', 'post-melon', 'bucketful of blueberries'];
      // init ddl_products
      var ddl = document.getElementById('ddl_products');
      ddl.innerText = null;

      products.forEach( function(element, index) { 
        ddl.add(new Option(element));
      });


    </script>    
  </body>
</html>